---
name: zilla-mqtt-kafka-broker
catalogs:
  catalog0:
    type: filesystem
    options:
      subjects:
        smartylighting:
          url: asyncapi/asyncapi.yaml
bindings:
  asyncapi_server:
    type: asyncapi
    kind: server
    options:
      specs:
        my-asyncapi-spec:
          catalog:
            catalog0:
              subject: smartylighting
              version: latest
    exit: asyncapi_client
  asyncapi_client:
    type: asyncapi
    kind: client
    options:
      specs:
        my-asyncapi-spec:
          catalog:
            catalog0:
              subject: smartylighting
              version: latest
      tcp:
        host: ${{env.MOSQUITTO_BROKER_HOST}}
        port: ${{env.MOSQUITTO_BROKER_PORT}}
